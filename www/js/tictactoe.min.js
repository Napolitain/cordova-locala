var Tictactoe={init:function(){Tictactoe.game=Table.create(3,3," ");Tictactoe.turn="x";Tictactoe.timeFlag=0;var f=window.innerWidth;var e=document.querySelector("svg.svg.tictactoe");if(parseInt(e.getAttribute("width"))>=f-20){Tictactoe.scaling=(f/(parseInt(e.getAttribute("width"))+50));e.style.transform="scale("+Tictactoe.scaling.toString()+")";var c=((parseInt(e.getAttribute("width"))-parseInt(e.getAttribute("width"))*Tictactoe.scaling.toString())/2).toString();e.style.left="-"+c+"px"}Tictactoe.models={x:[{"class":"tictactoe cross"},{"class":"tictactoe a",d:"m 20 20 l 60 60"},{"class":"tictactoe b",d:"m 80 20 l -60 60"}],o:[{"class":"tictactoe circle"},{"class":"tictactoe a",d:"m 20 50 a 30 30 0 0 1 60 0"},{"class":"tictactoe b",d:"m 80 50 a 30 30 0 0 1 -60 0"}]};var a=document.querySelectorAll("g.tictactoe.case");for(var d=0;d<a.length;d++){a[d].parentElement.removeChild(a[d])}for(var d=0;d<Tictactoe.game.length;d++){for(var b=0;b<Tictactoe.game[0].length;b++){var a=SVG.create("g");a.setAttribute("class","tictactoe case");a.setAttribute("x",b.toString());a.setAttribute("y",d.toString());SVG.add(a,"svg.svg.tictactoe");var a=SVG.create("path");a.setAttribute("class","tictactoe blank");a.setAttribute("d","M "+(50+b*100).toString()+" "+(50+d*100).toString()+" l 100 0 l 0 100 l -100 0 l 0 -100");a.addEventListener("mousedown",Tictactoe.play);SVG.add(a,"g.tictactoe.case:last-child")}}document.querySelector(".tictactoe.victory").style.opacity=0;document.querySelector("div.main.tictactoe").addEventListener("mousedown",Tictactoe.eventInit)},eventInit:function(){if(Date.now()-Tictactoe.timeFlag<=150){Tictactoe.init()}else{Tictactoe.timeFlag=Date.now()}},play:function(b){var h=b.target.parentElement;if(h.classList.contains("filled")){return false}else{Tictactoe.game[parseInt(h.getAttribute("y"))][parseInt(h.getAttribute("x"))]=Tictactoe.turn;var a=50+(100*parseInt(h.getAttribute("x")));var n=50+(100*parseInt(h.getAttribute("y")));var l=h.getAttribute("class");h.setAttribute("class",l+" filled "+Tictactoe.turn);var j=Tictactoe.models[Tictactoe.turn];var c=SVG.create("g");for(var f in j[0]){c.setAttribute(f,j[0][f])}h.appendChild(c);for(var g=1;g<j.length;g++){var e=SVG.create("path");for(var f in j[g]){if(f==="d"){e.setAttribute(f,"m "+a+" "+n+" "+j[g][f])}else{e.setAttribute(f,j[g][f])}}c.appendChild(e)}if(Tictactoe.checkWin()!==false){var d=document.querySelector(".tictactoe.victory");if(Tictactoe.turn==="x"){d.innerHTML="x won!"}else{d.innerHTML="o won!"}d.style.opacity=1;var m=document.querySelectorAll("path.tictactoe.blank");for(var g=0;g<m.length;g++){m[g].removeEventListener("mousedown",Tictactoe.play)}}Tictactoe.turn==="x"?Tictactoe.turn="o":Tictactoe.turn="x"}},checkWin:function(){return Table.pattern(Tictactoe.game,Tictactoe.turn.repeat(3))}};